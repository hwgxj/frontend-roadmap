# Next.js åç«¯ç®¡ç†å®Œå…¨æŒ‡å—

## ğŸ“š ç›®å½•
1. [API æ–‡ä»¶ç»“æ„](#api-æ–‡ä»¶ç»“æ„)
2. [åˆ›å»º API](#åˆ›å»º-api)
3. [å¤„ç†ä¸åŒè¯·æ±‚](#å¤„ç†ä¸åŒè¯·æ±‚)
4. [æ•°æ®ç®¡ç†](#æ•°æ®ç®¡ç†)
5. [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)
6. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ğŸ“ API æ–‡ä»¶ç»“æ„

### åŸºæœ¬è§„åˆ™

```
src/app/api/
â””â”€â”€ [åŠŸèƒ½æ¨¡å—]/
    â””â”€â”€ route.ts

æ–‡ä»¶å¤¹å = URL è·¯å¾„
route.ts = å¿…é¡»æ˜¯è¿™ä¸ªåå­—
```

### æ¨èç»“æ„ï¼ˆé’ˆå¯¹ä½ çš„é¡¹ç›®ï¼‰

```
src/app/api/
â”œâ”€â”€ roadmap/              # è·¯çº¿å›¾ç›¸å…³
â”‚   â”œâ”€â”€ route.ts         # GET /api/roadmap - è·å–æ•°æ®
â”‚   â”œâ”€â”€ save/
â”‚   â”‚   â””â”€â”€ route.ts     # POST /api/roadmap/save - ä¿å­˜æ•°æ®
â”‚   â””â”€â”€ reset/
â”‚       â””â”€â”€ route.ts     # POST /api/roadmap/reset - é‡ç½®æ•°æ®
â”‚
â”œâ”€â”€ notes/               # ç¬”è®°ç›¸å…³
â”‚   â””â”€â”€ route.ts         # GET/POST /api/notes
â”‚
â”œâ”€â”€ stats/               # ç»Ÿè®¡ç›¸å…³
â”‚   â””â”€â”€ route.ts         # POST /api/stats - è®¡ç®—ç»Ÿè®¡
â”‚
â””â”€â”€ health/              # å¥åº·æ£€æŸ¥
    â””â”€â”€ route.ts         # GET /api/health - æ£€æŸ¥æœåŠ¡çŠ¶æ€
```

---

## ğŸš€ åˆ›å»º API

### æ¨¡æ¿1ï¼šç®€å•çš„ GET API

```typescript
// src/app/api/health/route.ts

import { NextResponse } from 'next/server';

export async function GET() {
  return NextResponse.json({
    status: 'ok',
    timestamp: new Date().toISOString(),
    message: 'æœåŠ¡å™¨è¿è¡Œæ­£å¸¸'
  });
}
```

### æ¨¡æ¿2ï¼šæ¥æ”¶æ•°æ®çš„ POST API

```typescript
// src/app/api/roadmap/save/route.ts

import { NextResponse } from 'next/server';

export async function POST(request: Request) {
  try {
    // 1. è·å–è¯·æ±‚ä½“æ•°æ®
    const body = await request.json();
    
    // 2. éªŒè¯æ•°æ®
    if (!body.data) {
      return NextResponse.json(
        { error: 'ç¼ºå°‘æ•°æ®' },
        { status: 400 }
      );
    }
    
    // 3. å¤„ç†æ•°æ®ï¼ˆè¿™é‡Œå¯ä»¥ä¿å­˜åˆ°æ•°æ®åº“ï¼‰
    console.log('ä¿å­˜æ•°æ®ï¼š', body.data);
    
    // 4. è¿”å›ç»“æœ
    return NextResponse.json({
      success: true,
      message: 'ä¿å­˜æˆåŠŸ',
      savedAt: new Date().toISOString()
    });
    
  } catch (error) {
    console.error('ä¿å­˜å¤±è´¥ï¼š', error);
    return NextResponse.json(
      { error: 'æœåŠ¡å™¨é”™è¯¯' },
      { status: 500 }
    );
  }
}
```

### æ¨¡æ¿3ï¼šCRUD å®Œæ•´ç¤ºä¾‹

```typescript
// src/app/api/notes/route.ts

import { NextResponse } from 'next/server';

// ä¸´æ—¶æ•°æ®å­˜å‚¨ï¼ˆå®é™…é¡¹ç›®ä¼šç”¨æ•°æ®åº“ï¼‰
let notesStore: Record<string, string> = {};

// GET - è·å–æ‰€æœ‰ç¬”è®°
export async function GET() {
  return NextResponse.json({
    success: true,
    data: notesStore
  });
}

// POST - åˆ›å»ºç¬”è®°
export async function POST(request: Request) {
  try {
    const { itemId, content } = await request.json();
    
    if (!itemId || !content) {
      return NextResponse.json(
        { error: 'itemId å’Œ content ä¸èƒ½ä¸ºç©º' },
        { status: 400 }
      );
    }
    
    notesStore[itemId] = content;
    
    return NextResponse.json({
      success: true,
      message: 'ç¬”è®°åˆ›å»ºæˆåŠŸ'
    });
    
  } catch (error) {
    return NextResponse.json(
      { error: 'åˆ›å»ºå¤±è´¥' },
      { status: 500 }
    );
  }
}

// DELETE - åˆ é™¤æ‰€æœ‰ç¬”è®°
export async function DELETE() {
  notesStore = {};
  return NextResponse.json({
    success: true,
    message: 'å·²æ¸…ç©ºæ‰€æœ‰ç¬”è®°'
  });
}
```

### æ¨¡æ¿4ï¼šå¸¦å‚æ•°çš„åŠ¨æ€è·¯ç”±

```typescript
// src/app/api/notes/[itemId]/route.ts

import { NextResponse } from 'next/server';

// GET /api/notes/html-1
export async function GET(
  request: Request,
  { params }: { params: { itemId: string } }
) {
  const itemId = params.itemId;
  
  // ä»æ•°æ®åº“è·å–ç‰¹å®šç¬”è®°
  const note = await getNote(itemId);
  
  if (!note) {
    return NextResponse.json(
      { error: 'ç¬”è®°ä¸å­˜åœ¨' },
      { status: 404 }
    );
  }
  
  return NextResponse.json({
    success: true,
    data: note
  });
}

// PUT /api/notes/html-1
export async function PUT(
  request: Request,
  { params }: { params: { itemId: string } }
) {
  const itemId = params.itemId;
  const { content } = await request.json();
  
  // æ›´æ–°ç¬”è®°
  await updateNote(itemId, content);
  
  return NextResponse.json({
    success: true,
    message: 'æ›´æ–°æˆåŠŸ'
  });
}

// DELETE /api/notes/html-1
export async function DELETE(
  request: Request,
  { params }: { params: { itemId: string } }
) {
  const itemId = params.itemId;
  
  // åˆ é™¤ç¬”è®°
  await deleteNote(itemId);
  
  return NextResponse.json({
    success: true,
    message: 'åˆ é™¤æˆåŠŸ'
  });
}
```

---

## ğŸ”„ å¤„ç†ä¸åŒè¯·æ±‚

### HTTP æ–¹æ³•å¯¹ç…§è¡¨

| HTTP æ–¹æ³• | ç”¨é€” | ç¤ºä¾‹ |
|-----------|------|------|
| GET | è·å–æ•°æ® | è·å–è·¯çº¿å›¾æ•°æ® |
| POST | åˆ›å»ºæ•°æ® | ä¿å­˜æ–°ç¬”è®° |
| PUT | å®Œæ•´æ›´æ–° | æ›´æ–°æ•´ä¸ªç”¨æˆ·ä¿¡æ¯ |
| PATCH | éƒ¨åˆ†æ›´æ–° | åªæ›´æ–°ç”¨æˆ·å |
| DELETE | åˆ é™¤æ•°æ® | åˆ é™¤ç¬”è®° |

### åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¤„ç†å¤šä¸ªæ–¹æ³•

```typescript
// src/app/api/roadmap/route.ts

import { NextResponse } from 'next/server';

// GET - è·å–è·¯çº¿å›¾æ•°æ®
export async function GET() {
  const data = await loadRoadmapData();
  return NextResponse.json({ success: true, data });
}

// POST - åˆ›å»ºæ–°è·¯çº¿å›¾
export async function POST(request: Request) {
  const newData = await request.json();
  await createRoadmap(newData);
  return NextResponse.json({ success: true, message: 'åˆ›å»ºæˆåŠŸ' });
}

// PUT - æ›´æ–°æ•´ä¸ªè·¯çº¿å›¾
export async function PUT(request: Request) {
  const updatedData = await request.json();
  await updateRoadmap(updatedData);
  return NextResponse.json({ success: true, message: 'æ›´æ–°æˆåŠŸ' });
}

// DELETE - åˆ é™¤è·¯çº¿å›¾
export async function DELETE() {
  await deleteRoadmap();
  return NextResponse.json({ success: true, message: 'åˆ é™¤æˆåŠŸ' });
}
```

---

## ğŸ’¾ æ•°æ®ç®¡ç†

### æ–¹å¼1ï¼šå†…å­˜å­˜å‚¨ï¼ˆæœ€ç®€å•ï¼Œé‡å¯ä¸¢å¤±ï¼‰

```typescript
// src/app/api/store.ts

// å…¨å±€å˜é‡å­˜å‚¨æ•°æ®
export let roadmapData: any = null;
export let notesData: Record<string, string> = {};

// API ä¸­ä½¿ç”¨
import { roadmapData } from '../store';

export async function GET() {
  return Response.json({ data: roadmapData });
}
```

**ä¼˜ç‚¹**ï¼šç®€å•  
**ç¼ºç‚¹**ï¼šé‡å¯åæ•°æ®ä¸¢å¤±

---

### æ–¹å¼2ï¼šæ–‡ä»¶å­˜å‚¨ï¼ˆç®€å•ï¼Œæ•°æ®æŒä¹…åŒ–ï¼‰

```typescript
// src/app/api/roadmap/save/route.ts

import fs from 'fs';
import path from 'path';

export async function POST(request: Request) {
  const data = await request.json();
  
  // ä¿å­˜åˆ°æ–‡ä»¶
  const filePath = path.join(process.cwd(), 'data', 'roadmap.json');
  
  // ç¡®ä¿ç›®å½•å­˜åœ¨
  const dir = path.dirname(filePath);
  if (!fs.existsSync(dir)) {
    fs.mkdirSync(dir, { recursive: true });
  }
  
  // å†™å…¥æ–‡ä»¶
  fs.writeFileSync(filePath, JSON.stringify(data, null, 2));
  
  return Response.json({ success: true, message: 'ä¿å­˜æˆåŠŸ' });
}

// è¯»å–æ–‡ä»¶
export async function GET() {
  const filePath = path.join(process.cwd(), 'data', 'roadmap.json');
  
  if (!fs.existsSync(filePath)) {
    return Response.json({ data: null });
  }
  
  const content = fs.readFileSync(filePath, 'utf-8');
  const data = JSON.parse(content);
  
  return Response.json({ success: true, data });
}
```

**ä¼˜ç‚¹**ï¼šæ•°æ®æŒä¹…åŒ–ï¼Œä¸éœ€è¦æ•°æ®åº“  
**ç¼ºç‚¹**ï¼šä¸é€‚åˆå¤šç”¨æˆ·åœºæ™¯

---

### æ–¹å¼3ï¼šæ•°æ®åº“å­˜å‚¨ï¼ˆå®Œæ•´æ–¹æ¡ˆï¼‰

```typescript
// src/app/api/roadmap/route.ts

import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

export async function GET(request: Request) {
  // ä»æ•°æ®åº“è¯»å–
  const roadmaps = await prisma.roadmap.findMany();
  return Response.json({ success: true, data: roadmaps });
}

export async function POST(request: Request) {
  const data = await request.json();
  
  // ä¿å­˜åˆ°æ•°æ®åº“
  const roadmap = await prisma.roadmap.create({
    data: {
      userId: data.userId,
      content: JSON.stringify(data.content),
    }
  });
  
  return Response.json({ success: true, data: roadmap });
}
```

**ä¼˜ç‚¹**ï¼šé€‚åˆå¤šç”¨æˆ·ï¼Œæ•°æ®å®‰å…¨  
**ç¼ºç‚¹**ï¼šéœ€è¦é…ç½®æ•°æ®åº“

---

## ğŸ› è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨ console.log

```typescript
export async function POST(request: Request) {
  console.log('ğŸ¯ API è¢«è°ƒç”¨');
  
  const body = await request.json();
  console.log('ğŸ“¦ æ”¶åˆ°çš„æ•°æ®ï¼š', body);
  
  // å¤„ç†æ•°æ®
  const result = processData(body);
  console.log('âœ… å¤„ç†ç»“æœï¼š', result);
  
  return Response.json({ success: true });
}
```

**æŸ¥çœ‹æ—¥å¿—**ï¼šåœ¨è¿è¡Œ `npm run dev` çš„ç»ˆç«¯æŸ¥çœ‹

---

### 2. è¿”å›è¯¦ç»†é”™è¯¯ä¿¡æ¯

```typescript
export async function POST(request: Request) {
  try {
    const body = await request.json();
    
    // éªŒè¯æ•°æ®
    if (!body.itemId) {
      return Response.json(
        { 
          error: 'ç¼ºå°‘ itemId',
          received: body,
          hint: 'è¯·ç¡®ä¿å‘é€äº† itemId å­—æ®µ'
        },
        { status: 400 }
      );
    }
    
    // å¤„ç†é€»è¾‘...
    
  } catch (error) {
    console.error('âŒ é”™è¯¯è¯¦æƒ…ï¼š', error);
    return Response.json(
      { 
        error: 'æœåŠ¡å™¨é”™è¯¯',
        message: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯',
        stack: process.env.NODE_ENV === 'development' ? error.stack : undefined
      },
      { status: 500 }
    );
  }
}
```

---

### 3. æŸ¥çœ‹è¯·æ±‚ä¿¡æ¯

```typescript
export async function POST(request: Request) {
  // æ‰“å°è¯·æ±‚ä¿¡æ¯
  console.log('Method:', request.method);
  console.log('URL:', request.url);
  console.log('Headers:', Object.fromEntries(request.headers));
  
  const body = await request.json();
  console.log('Body:', body);
  
  return Response.json({ success: true });
}
```

---

### 4. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. æ‰“å¼€æµè§ˆå™¨ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° "Network" æ ‡ç­¾
3. è§¦å‘ API è°ƒç”¨
4. ç‚¹å‡»è¯·æ±‚æŸ¥çœ‹ï¼š
   - Request Headers
   - Request Payload
   - Response
   - Status Code

---

### 5. ä½¿ç”¨ API æµ‹è¯•å·¥å…·

#### æ–¹æ³•1ï¼šåˆ›å»ºæµ‹è¯•æ–‡ä»¶ï¼ˆæ¨èï¼‰

```http
### æµ‹è¯• GET è¯·æ±‚
GET http://localhost:3000/api/roadmap

### æµ‹è¯• POST è¯·æ±‚
POST http://localhost:3000/api/roadmap/save
Content-Type: application/json

{
  "data": {
    "itemId": "html-1",
    "status": "completed"
  }
}

### æµ‹è¯•å¸¦å‚æ•°çš„è¯·æ±‚
GET http://localhost:3000/api/notes/html-1
```

å®‰è£… VSCode æ’ä»¶ï¼š**REST Client**

#### æ–¹æ³•2ï¼šä½¿ç”¨ curl

```bash
# GET è¯·æ±‚
curl http://localhost:3000/api/roadmap

# POST è¯·æ±‚
curl -X POST http://localhost:3000/api/roadmap/save \
  -H "Content-Type: application/json" \
  -d '{"data":{"itemId":"html-1","status":"completed"}}'
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ç»Ÿä¸€çš„å“åº”æ ¼å¼

```typescript
// src/lib/api-response.ts

export function successResponse(data: any, message = 'æˆåŠŸ') {
  return Response.json({
    success: true,
    message,
    data,
    timestamp: new Date().toISOString()
  });
}

export function errorResponse(error: string, status = 400) {
  return Response.json(
    {
      success: false,
      error,
      timestamp: new Date().toISOString()
    },
    { status }
  );
}

// ä½¿ç”¨
import { successResponse, errorResponse } from '@/lib/api-response';

export async function GET() {
  const data = await fetchData();
  return successResponse(data);
}
```

---

### 2. é”™è¯¯å¤„ç†åŒ…è£…å™¨

```typescript
// src/lib/api-handler.ts

export function apiHandler(handler: Function) {
  return async (request: Request, context?: any) => {
    try {
      return await handler(request, context);
    } catch (error) {
      console.error('API Error:', error);
      return Response.json(
        { 
          error: 'æœåŠ¡å™¨é”™è¯¯',
          message: error instanceof Error ? error.message : 'æœªçŸ¥é”™è¯¯'
        },
        { status: 500 }
      );
    }
  };
}

// ä½¿ç”¨
export const POST = apiHandler(async (request: Request) => {
  const data = await request.json();
  // å¤„ç†é€»è¾‘...
  return Response.json({ success: true });
});
```

---

### 3. æ•°æ®éªŒè¯

```typescript
// src/lib/validation.ts

export function validateRequired(data: any, fields: string[]) {
  const missing = fields.filter(field => !data[field]);
  if (missing.length > 0) {
    throw new Error(`ç¼ºå°‘å¿…å¡«å­—æ®µ: ${missing.join(', ')}`);
  }
}

export function validateEmail(email: string) {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!regex.test(email)) {
    throw new Error('é‚®ç®±æ ¼å¼ä¸æ­£ç¡®');
  }
}

// ä½¿ç”¨
import { validateRequired } from '@/lib/validation';

export async function POST(request: Request) {
  const body = await request.json();
  
  try {
    validateRequired(body, ['itemId', 'status']);
    // ç»§ç»­å¤„ç†...
  } catch (error) {
    return Response.json(
      { error: error.message },
      { status: 400 }
    );
  }
}
```

---

### 4. ç¯å¢ƒå˜é‡ç®¡ç†

```bash
# .env.local

# æ•°æ®åº“
DATABASE_URL="your-database-url"

# API å¯†é’¥
API_SECRET="your-secret-key"

# ç¯å¢ƒ
NODE_ENV="development"
```

```typescript
// åœ¨ API ä¸­ä½¿ç”¨
export async function GET() {
  const dbUrl = process.env.DATABASE_URL;
  const secret = process.env.API_SECRET;
  
  // ä½¿ç”¨ç¯å¢ƒå˜é‡...
}
```

---

### 5. æ—¥å¿—ç®¡ç†

```typescript
// src/lib/logger.ts

export const logger = {
  info: (message: string, data?: any) => {
    console.log(`â„¹ï¸ [INFO] ${message}`, data || '');
  },
  
  error: (message: string, error?: any) => {
    console.error(`âŒ [ERROR] ${message}`, error || '');
  },
  
  warn: (message: string, data?: any) => {
    console.warn(`âš ï¸ [WARN] ${message}`, data || '');
  },
  
  debug: (message: string, data?: any) => {
    if (process.env.NODE_ENV === 'development') {
      console.log(`ğŸ› [DEBUG] ${message}`, data || '');
    }
  }
};

// ä½¿ç”¨
import { logger } from '@/lib/logger';

export async function POST(request: Request) {
  logger.info('æ”¶åˆ°ä¿å­˜è¯·æ±‚');
  
  try {
    const data = await request.json();
    logger.debug('è¯·æ±‚æ•°æ®', data);
    
    // å¤„ç†é€»è¾‘...
    
    logger.info('ä¿å­˜æˆåŠŸ');
    return Response.json({ success: true });
    
  } catch (error) {
    logger.error('ä¿å­˜å¤±è´¥', error);
    return Response.json({ error: 'ä¿å­˜å¤±è´¥' }, { status: 500 });
  }
}
```

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### åˆ›å»ºæ–° API æ—¶ï¼š

- [ ] åœ¨ `src/app/api/` ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹
- [ ] åˆ›å»º `route.ts` æ–‡ä»¶
- [ ] å¯¼å‡ºå¯¹åº”çš„ HTTP æ–¹æ³•å‡½æ•°
- [ ] æ·»åŠ é”™è¯¯å¤„ç†
- [ ] æ·»åŠ æ•°æ®éªŒè¯
- [ ] æ·»åŠ æ—¥å¿—
- [ ] æµ‹è¯• API
- [ ] åœ¨å‰ç«¯è°ƒç”¨æµ‹è¯•

### ä»£ç è´¨é‡æ£€æŸ¥ï¼š

- [ ] ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼
- [ ] æœ‰å®Œå–„çš„é”™è¯¯å¤„ç†
- [ ] æœ‰æ•°æ®éªŒè¯
- [ ] æœ‰æ¸…æ™°çš„æ—¥å¿—
- [ ] æœ‰æ³¨é‡Šè¯´æ˜
- [ ] HTTP çŠ¶æ€ç æ­£ç¡®
- [ ] ç±»å‹å®šä¹‰å®Œæ•´ï¼ˆTypeScriptï¼‰

---

## ğŸš€ å®æˆ˜ç¤ºä¾‹

### å®Œæ•´çš„ä¿å­˜è·¯çº¿å›¾ API

```typescript
// src/app/api/roadmap/save/route.ts

import { NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';

// æ—¥å¿—å·¥å…·
const log = (message: string, data?: any) => {
  console.log(`[Roadmap API] ${message}`, data || '');
};

// æ•°æ®éªŒè¯
function validateRoadmapData(data: any) {
  if (!data) {
    throw new Error('æ•°æ®ä¸èƒ½ä¸ºç©º');
  }
  
  if (!Array.isArray(data)) {
    throw new Error('æ•°æ®æ ¼å¼é”™è¯¯ï¼Œåº”è¯¥æ˜¯æ•°ç»„');
  }
  
  return true;
}

// ä¿å­˜åˆ°æ–‡ä»¶
function saveToFile(data: any) {
  const dataDir = path.join(process.cwd(), 'data');
  const filePath = path.join(dataDir, 'roadmap.json');
  
  // ç¡®ä¿ç›®å½•å­˜åœ¨
  if (!fs.existsSync(dataDir)) {
    fs.mkdirSync(dataDir, { recursive: true });
  }
  
  // å†™å…¥æ–‡ä»¶
  fs.writeFileSync(filePath, JSON.stringify(data, null, 2), 'utf-8');
  
  return filePath;
}

// POST è¯·æ±‚å¤„ç†
export async function POST(request: Request) {
  const startTime = Date.now();
  
  try {
    log('æ”¶åˆ°ä¿å­˜è¯·æ±‚');
    
    // 1. è·å–æ•°æ®
    const body = await request.json();
    log('è¯·æ±‚æ•°æ®å¤§å°', `${JSON.stringify(body).length} bytes`);
    
    // 2. éªŒè¯æ•°æ®
    validateRoadmapData(body.data);
    log('æ•°æ®éªŒè¯é€šè¿‡');
    
    // 3. ä¿å­˜æ•°æ®
    const filePath = saveToFile(body.data);
    log('æ•°æ®å·²ä¿å­˜åˆ°', filePath);
    
    // 4. è¿”å›æˆåŠŸ
    const duration = Date.now() - startTime;
    log('ä¿å­˜å®Œæˆ', `è€—æ—¶ ${duration}ms`);
    
    return NextResponse.json({
      success: true,
      message: 'ä¿å­˜æˆåŠŸ',
      savedAt: new Date().toISOString(),
      duration: `${duration}ms`
    });
    
  } catch (error) {
    const duration = Date.now() - startTime;
    log('ä¿å­˜å¤±è´¥', error);
    
    return NextResponse.json(
      {
        success: false,
        error: error instanceof Error ? error.message : 'ä¿å­˜å¤±è´¥',
        duration: `${duration}ms`
      },
      { status: 500 }
    );
  }
}

// GET è¯·æ±‚å¤„ç†
export async function GET() {
  try {
    log('æ”¶åˆ°è¯»å–è¯·æ±‚');
    
    const filePath = path.join(process.cwd(), 'data', 'roadmap.json');
    
    if (!fs.existsSync(filePath)) {
      log('æ–‡ä»¶ä¸å­˜åœ¨');
      return NextResponse.json({
        success: true,
        data: null,
        message: 'æš‚æ— æ•°æ®'
      });
    }
    
    const content = fs.readFileSync(filePath, 'utf-8');
    const data = JSON.parse(content);
    
    log('è¯»å–æˆåŠŸ', `${content.length} bytes`);
    
    return NextResponse.json({
      success: true,
      data,
      loadedAt: new Date().toISOString()
    });
    
  } catch (error) {
    log('è¯»å–å¤±è´¥', error);
    
    return NextResponse.json(
      {
        success: false,
        error: 'è¯»å–å¤±è´¥'
      },
      { status: 500 }
    );
  }
}
```

---

## ğŸŠ æ€»ç»“

### ç®¡ç†åç«¯çš„æ ¸å¿ƒæ­¥éª¤ï¼š

1. **ç»„ç»‡æ–‡ä»¶**ï¼šæŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ† API
2. **å¤„ç†è¯·æ±‚**ï¼šä½¿ç”¨æ­£ç¡®çš„ HTTP æ–¹æ³•
3. **ç®¡ç†æ•°æ®**ï¼šé€‰æ‹©åˆé€‚çš„å­˜å‚¨æ–¹å¼
4. **è°ƒè¯•æµ‹è¯•**ï¼šä½¿ç”¨æ—¥å¿—å’Œå·¥å…·
5. **æœ€ä½³å®è·µ**ï¼šç»Ÿä¸€æ ¼å¼ï¼Œé”™è¯¯å¤„ç†

### æ¨èæµç¨‹ï¼š

```
éœ€æ±‚åˆ†æ
  â†“
è®¾è®¡ API ç»“æ„
  â†“
åˆ›å»º route.ts æ–‡ä»¶
  â†“
å®ç°ä¸šåŠ¡é€»è¾‘
  â†“
æ·»åŠ é”™è¯¯å¤„ç†
  â†“
æµ‹è¯• API
  â†“
åœ¨å‰ç«¯è°ƒç”¨
  â†“
éƒ¨ç½²ä¸Šçº¿
```

---

**ä¸‹ä¸€æ­¥**ï¼šé€‰æ‹©ä¸€ä¸ªåŠŸèƒ½ï¼ŒæŒ‰ç…§è¿™ä¸ªæŒ‡å—åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªå®Œæ•´ APIï¼



